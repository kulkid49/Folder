
<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<title>EY Document Folder Tree</title>
<style>
    body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(to right, #f0f4f8, #e9eef3);
        padding: 30px;
    }
    h2 {
        border-bottom: 2px solid #3498db;
        padding-bottom: 10px;
    }
    ul, #folderTree {
        list-style-type: none;
        padding: 0;
    }
    li {
        padding-left: 20px;
        margin: 4px 0;
        transition: background 0.2s;
    }
    li:hover {
        background: #eaf4ff;
        border-radius: 4px;
    }
    .caret {
        cursor: pointer;
        user-select: none;
        display: inline-flex;
        align-items: center;
    }
    .caret::before {
        content: "\25B6";
        margin-right: 6px;
        transition: transform 0.3s;
        order: -2;
    }
    .caret.folder-closed::after {
        content: "\1F4C1"; /* closed folder emoji */
        margin-right: 6px;
        transition: transform 0.3s;
        order: -1;
    }
    .caret.folder-open::after {
        content: "\1F4C2"; /* open folder emoji */
        margin-right: 6px;
        transition: transform 0.3s;
        order: -1;
    }
    .caret-down::before {
        transform: rotate(90deg);
    }
    .nested {
        display: none;
        margin-left: 15px;
        border-left: 1px dashed #ccc;
        padding-left: 10px;
    }
    .active {
        display: block;
    }
    #searchBox {
        margin: 15px 0;
        padding: 6px;
        width: 100%;
    }
    #searchResult {
        font-weight: bold;
        color: #2c3e50;
        margin-top: 10px;
    }
    .level-1 { color: #1f4e79; font-weight: bold; }
    .level-2 { color: #2a7ebf; }
    .level-3 { color: #27ae60; }
    .level-4 { color: #8e44ad; }
    .level-5 { color: #e67e22; }
    .level-6 { color: #c0392b; }
</style>
<style>
.folder-actions {
    display: none;
    margin-left: 10px;
}
li:hover .folder-actions {
    display: inline;
}
.folder-actions button {
    background: none;
    border: none;
    cursor: pointer;
    font-size: 14px;
    margin-left: 3px;
}
.meta-section {
    position: fixed;
    top: 30px;
    right: 30px;
    width: 350px;
    background: #fff;
    border: 1px solid #ccc;
    border-radius: 8px;
    box-shadow: 2px 2px 12px rgba(0,0,0,0.1);
    padding: 15px;
    z-index: 999;
}
.meta-section input, .meta-section textarea {
    width: 100%;
    margin-bottom: 6px;
    padding: 6px;
    border: 1px solid #aaa;
    border-radius: 4px;
}
.meta-section label {
    font-weight: bold;
}

/* consistent buttons with different colors */
.action-button {
    padding: 6px 12px;
    margin-right: 6px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    color: #fff;
    font-weight: bold;
}
    .main-container {
        display: flex;
        align-items: flex-start;
        gap: 20px;
    }

    .tree-section {
        flex: 0 0 70%;
        max-height: 80vh; /* allow scrolling for long folder lists */
        overflow-y: auto;
    }

    #infoBox {
        flex: 0 0 30%;
        width: 30%;
        background: #fff;
        border: 1px solid #ccc;
        border-radius: 8px;
        box-shadow: 2px 2px 12px rgba(0,0,0,0.1);
        padding: 15px;
        display: none;
    }

    /* styling for edit details form */
    #editForm label {
        display: block;
        margin-top: 8px;
        font-weight: bold;
    }

    #editForm input,
    #editForm textarea {
        width: 100%;
        padding: 6px;
        margin-top: 4px;
        border: 1px solid #aaa;
        border-radius: 4px;
    }

    #editForm button {
        margin-top: 10px;
        background-color: #3498db;
        color: #fff;
        border: none;
        padding: 8px 12px;
        border-radius: 4px;
        cursor: pointer;
    }

    /* download button styling */
    #downloadBtn {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background-color: #27ae60;
        color: #fff;
        border: none;
        padding: 10px 15px;
        border-radius: 4px;
        cursor: pointer;
    }

    #downloadBtn:hover {
        opacity: 0.9;
    }
.action-button:hover {
    opacity: 0.9;
}
.expand-btn { background-color: #3498db; }
.collapse-btn { background-color: #e67e22; }
.clear-btn { background-color: #e74c3c; }
</style></head>
<body>
<h2>📁 EY DOC Folder Tree</h2>
<button class="action-button expand-btn" onclick="expandAll()">Expand All</button>
<button class="action-button collapse-btn" onclick="collapseAll()">Collapse All</button>
<input id="searchBox" oninput="searchFolder()" placeholder="Search folder..." type="text"/>
<button class="action-button clear-btn" onclick="clearSearch()">Clear Search</button>
<div id="searchResult"></div>
<div class="main-container">
<div class="tree-section">
<ul id="folderTree">
<li class="level-1"><span class="caret">Project Governance</span>
<ul class="nested">
<li class="level-2"><span class="caret">01 Project Plan</span>
<ul class="nested">
<li class="level-3">📁Phase 1 Project Plan</li>
<li class="level-3">📁Phase 1 Ref Docs</li>
<li class="level-3">📁Phase 2 Project Plan</li>
<li class="level-3">📁Phase 2 Ref Docs</li>
</ul>
</li>
<li class="level-2"><span class="caret">02 PMO Corner</span>
<ul class="nested">
<li class="level-3">📁MOM</li>
<li class="level-3">📁Risk Register</li>
</ul>
</li>
<li class="level-2"><span class="caret">03 Steering Committee</span>
<ul class="nested">
<li class="level-3">📁SteerCo Decks</li>
</ul>
</li>
<li class="level-2"><span class="caret">04 Travel Planning</span>
<ul class="nested">
<li class="level-3">📁Travel Planner Phase 1</li>
</ul>
</li>
</ul>
</li>
<li class="level-1"><span class="caret">Global Template</span>
<ul class="nested">
<li class="level-2">📁Inputs from IRC</li>
<li class="level-2"><span class="caret">Deliverables for Sign Off</span>
<ul class="nested">
<li class="level-3">📁01 BPML</li>
<li class="level-3">📁02 Org. Structure</li>
<li class="level-3">📁03 RTM</li>
<li class="level-3">📁04 KDS</li>
<li class="level-3">📁05 BPFD</li>
<li class="level-3">📁06 WRICEF</li>
<li class="level-3">📁07 Others</li>
</ul>
</li>
<li class="level-2"><span class="caret">Signed Off Documents</span>
<ul class="nested">
<li class="level-3">📁01 BPML</li>
<li class="level-3">📁02 Org. Structure</li>
<li class="level-3">📁03 RTM</li>
<li class="level-3">📁04 KDS</li>
<li class="level-3">📁05 BPFD</li>
<li class="level-3">📁06 WRICEF</li>
<li class="level-3">📁07 Others</li>
</ul>
</li>
<li class="level-2"><span class="caret">Working Documents GT</span>
<ul class="nested">
<li class="level-3">📁01 BPML</li>
<li class="level-3">📁02 Org. Structure</li>
<li class="level-3">📁03 RTM</li>
<li class="level-3">📁04 KDS</li>
<li class="level-3">📁05 BPFD</li>
<li class="level-3">📁06 WRICEF</li>
<li class="level-3">📁07 Others</li>
</ul>
</li>
</ul>
</li>
<li class="level-1"><span class="caret">Roll Out Phase 1</span>
<ul class="nested">
<li class="level-2"><span class="caret">Local Fit GAP</span>
<ul class="nested">
<li class="level-3"><span class="caret">Working Documents</span>
<ul class="nested">
<li class="level-4">📁Local BPFDs</li>
<li class="level-4">📁Local Fit-Gap MOMs</li>
<li class="level-4">📁Cost Center List_Final_Phase1</li>
<li class="level-4">📁GE Sign Off Emails</li>
<li class="level-4">📁ID Sign Off Emails</li>
<li class="level-4">📁UZ Sign Off Emails</li>
<li class="level-4">📁Local formats</li>
<li class="level-4">📁LOCAL KDS</li>
<li class="level-4">📁Local RTM</li>
<li class="level-4">📁Local_Fit-Gap_WS_Action Item Tracker</li>
<li class="level-4">📁Number Ranges</li>
</ul>
</li>
<li class="level-3"><span class="caret">Deliverables for Sign Off</span>
<ul class="nested">
<li class="level-4">📁Local BPFDs</li>
<li class="level-4">📁LOCAL KDS</li>
<li class="level-4">📁Local RTM</li>
<li class="level-4">📁Number Ranges</li>
<li class="level-4"><span class="caret">Revisions</span>
<ul class="nested">
<li class="level-5">📁Local BPFDs</li>
<li class="level-5">📁LOCAL KDS</li>
<li class="level-5">📁Local RTM</li>
<li class="level-5">📁Number Ranges</li>
</ul>
</li>
</ul>
</li>
<li class="level-3"><span class="caret">Signed Off Documents</span>
<ul class="nested">
<li class="level-4">📁Tracker</li>
<li class="level-4"><span class="caret">Sign off Reference</span>
<ul class="nested">
<li class="level-5">📁GE Sign Off Emails</li>
<li class="level-5">📁ID Sign Off Emails</li>
<li class="level-5">📁UZ Sign Off Emails</li>
</ul>
</li>
</ul>
</li>
<li class="level-3"><span class="caret">Realize &amp; Build</span>
<ul class="nested">
<li class="level-4">📁Configuration checklist</li>
<li class="level-4">📁WRICEF Developments</li>
</ul>
</li>
<li class="level-3"><span class="caret">Realize &amp; Test</span>
<ul class="nested">
<li class="level-4">📁UT</li>
<li class="level-4">📁SIT</li>
<li class="level-4">📁UAT</li>
</ul>
</li>
<li class="level-3"><span class="caret">Governance</span>
<ul class="nested">
<li class="level-4">📁TR Movement Tracker</li>
<li class="level-4">📁SAP Server Readiness</li>
</ul>
</li>
<li class="level-3">📁Master Data</li>
<li class="level-3"><span class="caret">Cut Over</span>
<ul class="nested">
<li class="level-4">📁Cutover Plan</li>
<li class="level-4">📁Cutover Strategy</li>
<li class="level-4">📁Cutover Templates</li>
</ul>
</li>
<li class="level-3">📁Pre-Go-Live</li>
<li class="level-3">📁Go Live</li>
<li class="level-3">📁PGLS</li>
</ul>
</li>
</ul>
<script>
    const togglers = document.getElementsByClassName("caret");
    for (let i = 0; i < togglers.length; i++) {
        togglers[i].classList.add("folder-closed");
        togglers[i].addEventListener("click", function () {
            const nestedList = this.parentElement.querySelector(".nested");
            if (nestedList) {
                nestedList.classList.toggle("active");
                this.classList.toggle("caret-down");
                this.classList.toggle("folder-open");
                this.classList.toggle("folder-closed");
            }
        });
    }

    function expandAll() {
        document.querySelectorAll(".nested").forEach(n => n.classList.add("active"));
        document.querySelectorAll(".caret").forEach(c => {
            c.classList.add("caret-down", "folder-open");
            c.classList.remove("folder-closed");
        });
    }

    function collapseAll() {
        document.querySelectorAll(".nested").forEach(n => n.classList.remove("active"));
        document.querySelectorAll(".caret").forEach(c => {
            c.classList.remove("caret-down", "folder-open");
            c.classList.add("folder-closed");
        });
    }

    function searchFolder() {
        const query = document.getElementById("searchBox").value.toLowerCase().trim();
        const items = document.querySelectorAll("#folderTree li");
        let results = [];

        function getPath(el) {
            let path = [];
            while (el && el.tagName === "LI") {
                const caret = el.querySelector(".caret");
                path.unshift(caret ? caret.textContent.trim() : el.textContent.trim());
                el = el.parentElement.closest("li");
            }
            return path.join(" > ");
        }

        function expandAncestors(el) {
            while (el && el.id !== "folderTree") {
                if (el.classList.contains("nested")) {
                    el.classList.add("active");
                }
                const caret = el.querySelector(".caret");
                if (caret) {
                    caret.classList.add("caret-down", "folder-open");
                    caret.classList.remove("folder-closed");
                }
                el = el.parentElement;
            }
        }

        items.forEach(el => {
            el.style.display = "none";
            el.style.backgroundColor = "";
        });

        if (query) {
            items.forEach(el => {
                const text = el.textContent.trim().toLowerCase();
                if (text.includes(query)) {
                    el.style.display = "";
                    el.style.backgroundColor = "#ffffcc";
                    expandAncestors(el);
                    results.push(getPath(el));
                }
            });
        } else {
            items.forEach(el => el.style.display = "");
        }

        const result = document.getElementById("searchResult");
        if (query && results.length) {
            result.innerHTML = "🔍 Matches Found:<br>" + results.map(r => "📂 " + r).join("<br>");
        } else if (query) {
            result.textContent = "❌ No match found.";
        } else {
            result.textContent = "";
        }
    }

    function clearSearch() {
        const input = document.getElementById("searchBox");
        input.value = "";
        searchFolder();
    }
</script><script>
const folderMeta = {
  'project governance': { 'Comments': 'To be moved to main folder under EY DOC', 'Read Access': 'IRC PMO + EY PMO', 'Write Access': 'IRC PMO + EY PMO' },
  'project governance > 01 project plan > phase 1 project plan': { 'Comments': 'Project Plan in Excel', 'Read Access': 'IRC PMO + EY PMO+BPLs+MPLs+IT Heads', 'Write Access': 'IRC PMO + EY PMO' },
  'project governance > 01 project plan > phase 1 ref docs': { 'Comments': 'Project Plan in MPP', 'Read Access': 'IRC PMO + EY PMO+BPLs+MPLs+IT Heads', 'Write Access': 'IRC PMO + EY PMO' },
  'project governance > 01 project plan > phase 2 project plan': { 'Comments': 'Project Plan in Excel', 'Read Access': 'IRC PMO + EY PMO+BPLs+MPLs+IT Heads', 'Write Access': 'IRC PMO + EY PMO' },
  'project governance > 01 project plan > phase 2 ref docs': { 'Comments': 'Project Plan in MPP', 'Read Access': 'IRC PMO + EY PMO+BPLs+MPLs+IT Heads', 'Write Access': 'IRC PMO + EY PMO' },
  'project governance > 02 pmo corner > mom': { 'Comments': 'PMO Meeting MoMs', 'Read Access': 'IRC PMO + EY PMO', 'Write Access': 'IRC PMO + EY PMO' },
  'project governance > 02 pmo corner > risk register': { 'Comments': '', 'Read Access': 'IRC PMO + EY PMO', 'Write Access': 'IRC PMO + EY PMO' },
  'project governance > 03 steering committee > steerco decks': { 'Comments': 'Date-wise SteerCo. Decks', 'Read Access': 'IRC PMO + EY PMO', 'Write Access': 'IRC PMO + EY PMO' },
  'project governance > 04 travel planning > travel planner phase 1': { 'Comments': '', 'Read Access': 'IRC PMO + EY PMO', 'Write Access': 'IRC PMO + EY PMO' },
  'global template > inputs from irc': { 'Comments': 'Reports and Other Documents Received from IRC.\nCountry-wise — move reports to respective folders under AS-IS', 'Read Access': 'IRC + EY', 'Write Access': 'IRC' },
  'global template > deliverables for sign off > 01 bpml': { 'Comments': '', 'Read Access': 'IRC + EY', 'Write Access': 'Core EY PMO' },
  'global template > deliverables for sign off > 02 org. structure': { 'Comments': '', 'Read Access': 'IRC + EY', 'Write Access': 'Core EY PMO' },
  'global template > deliverables for sign off > 03 rtm': { 'Comments': '', 'Read Access': 'IRC + EY', 'Write Access': 'Core EY PMO' },
  'global template > deliverables for sign off > 04 kds': { 'Comments': '', 'Read Access': 'IRC + EY', 'Write Access': 'Core EY PMO' },
  'global template > deliverables for sign off > 05 bpfd': { 'Comments': '', 'Read Access': 'IRC + EY', 'Write Access': 'Core EY PMO' },
  'global template > deliverables for sign off > 06 wricef': { 'Comments': '', 'Read Access': 'IRC + EY', 'Write Access': 'Core EY PMO' },
  'global template > deliverables for sign off > 07 others': { 'Comments': 'Example: Nigeria Open Points', 'Read Access': 'IRC + EY', 'Write Access': 'Core EY PMO' },
  'global template > signed off documents > 01 bpml': { 'Comments': 'Only Final Signed off Docs', 'Read Access': 'IRC + EY', 'Write Access': 'EY Super PMO' },
  'global template > signed off documents > 02 org. structure': { 'Comments': 'Only Final Signed off Docs', 'Read Access': 'IRC + EY', 'Write Access': 'EY Super PMO' },
  'global template > signed off documents > 03 rtm': { 'Comments': 'Only Final Signed off Docs', 'Read Access': 'IRC + EY', 'Write Access': 'EY Super PMO' },
  'global template > signed off documents > 04 kds': { 'Comments': 'Only Final Signed off Docs', 'Read Access': 'IRC + EY', 'Write Access': 'EY Super PMO' },
  'global template > signed off documents > 05 bpfd': { 'Comments': 'Only Final Signed off Docs', 'Read Access': 'IRC + EY', 'Write Access': 'EY Super PMO' },
  'global template > signed off documents > 06 wricef': { 'Comments': 'Only Final Signed off Docs', 'Read Access': 'IRC + EY', 'Write Access': 'EY Super PMO' },
  'global template > signed off documents > 07 others': { 'Comments': 'Only Final Signed off Docs', 'Read Access': 'IRC + EY', 'Write Access': 'EY Super PMO' },
  'global template > working documents gt': { 'Comments': 'Folders to be created as needed', 'Read Access': 'IRC + EY', 'Write Access': 'IRC + EY' },
  'global template > working documents gt > 01 bpml': { 'Comments': 'only 1 file in the working document', 'Read Access': 'IRC + EY', 'Write Access': 'IRC + EY' },
  'global template > working documents gt > 02 org. structure': { 'Comments': '', 'Read Access': 'IRC + EY', 'Write Access': 'IRC + EY' },
  'global template > working documents gt > 03 rtm': { 'Comments': '', 'Read Access': 'IRC + EY', 'Write Access': 'IRC + EY' },
  'global template > working documents gt > 04 kds': { 'Comments': '', 'Read Access': 'IRC + EY', 'Write Access': 'IRC + EY' },
  'global template > working documents gt > 05 bpfd': { 'Comments': '', 'Read Access': 'IRC + EY', 'Write Access': 'IRC + EY' },
  'global template > working documents gt > 06 wricef': { 'Comments': '', 'Read Access': 'IRC + EY', 'Write Access': 'IRC + EY' },
  'global template > working documents gt > 07 others': { 'Comments': '', 'Read Access': 'IRC + EY', 'Write Access': 'IRC + EY' },
  'roll out phase 1 > local fit gap > working documents > local bpfds': { 'Comments': '', 'Read Access': 'IRC + EY', 'Write Access': 'IRC + EY' },
  'roll out phase 1 > local fit gap > working documents > local fit-gap moms': { 'Comments': '', 'Read Access': 'IRC + EY', 'Write Access': 'IRC + EY' },
  'roll out phase 1 > local fit gap > working documents > cost center list_final_phase1': { 'Comments': '', 'Read Access': 'IRC + EY', 'Write Access': 'IRC + EY' },
  'roll out phase 1 > local fit gap > working documents > ge sign off emails': { 'Comments': '', 'Read Access': 'IRC + EY', 'Write Access': 'IRC + EY' },
  'roll out phase 1 > local fit gap > working documents > id sign off emails': { 'Comments': '', 'Read Access': 'IRC + EY', 'Write Access': 'IRC + EY' },
  'roll out phase 1 > local fit gap > working documents > uz sign off emails': { 'Comments': '', 'Read Access': 'IRC + EY', 'Write Access': 'IRC + EY' },
  'roll out phase 1 > local fit gap > working documents > local formats': { 'Comments': '', 'Read Access': 'IRC + EY', 'Write Access': 'IRC + EY' },
  'roll out phase 1 > local fit gap > working documents > local kds': { 'Comments': '', 'Read Access': 'IRC + EY', 'Write Access': 'IRC + EY' },
  'roll out phase 1 > local fit gap > working documents > local rtm': { 'Comments': '', 'Read Access': 'IRC + EY', 'Write Access': 'IRC + EY' },
  'roll out phase 1 > local fit gap > working documents > local_fit-gap_ws_action item tracker': { 'Comments': '', 'Read Access': 'IRC + EY', 'Write Access': 'IRC + EY' },
  'roll out phase 1 > local fit gap > working documents > number ranges': { 'Comments': '', 'Read Access': 'IRC + EY', 'Write Access': 'IRC + EY' },
  'roll out phase 1 > local fit gap > deliverables for sign off > local bpfds': { 'Comments': '', 'Read Access': 'IRC + EY', 'Write Access': 'EY' },
  'roll out phase 1 > local fit gap > deliverables for sign off > local kds': { 'Comments': '', 'Read Access': 'IRC + EY', 'Write Access': 'EY' },
  'roll out phase 1 > local fit gap > deliverables for sign off > local rtm': { 'Comments': '', 'Read Access': 'IRC + EY', 'Write Access': 'EY' },
  'roll out phase 1 > local fit gap > deliverables for sign off > number ranges': { 'Comments': '', 'Read Access': 'IRC + EY', 'Write Access': 'EY' },
  'roll out phase 1 > local fit gap > deliverables for sign off > revisions > local bpfds': { 'Comments': '', 'Read Access': 'IRC + EY', 'Write Access': 'EY' },
  'roll out phase 1 > local fit gap > deliverables for sign off > revisions > local kds': { 'Comments': '', 'Read Access': 'IRC + EY', 'Write Access': 'EY' },
  'roll out phase 1 > local fit gap > deliverables for sign off > revisions > local rtm': { 'Comments': '', 'Read Access': 'IRC + EY', 'Write Access': 'EY' },
  'roll out phase 1 > local fit gap > deliverables for sign off > revisions > number ranges': { 'Comments': '', 'Read Access': 'IRC + EY', 'Write Access': 'EY' },
  'roll out phase 1 > local fit gap > signed off documents > tracker': { 'Comments': '', 'Read Access': 'IRC PMO + EY PMO', 'Write Access': 'IRC PMO + EY PMO' },
  'roll out phase 1 > local fit gap > signed off documents > sign off reference > ge sign off emails': { 'Comments': '', 'Read Access': 'IRC + EY', 'Write Access': 'IRC PMO + EY PMO' },
  'roll out phase 1 > local fit gap > signed off documents > sign off reference > id sign off emails': { 'Comments': '', 'Read Access': 'IRC + EY', 'Write Access': 'IRC PMO + EY PMO' },
  'roll out phase 1 > local fit gap > signed off documents > sign off reference > uz sign off emails': { 'Comments': '', 'Read Access': 'IRC + EY', 'Write Access': 'IRC PMO + EY PMO' },
  'roll out phase 1 > local fit gap > realize & build > configuration checklist': { 'Comments': '', 'Read Access': 'IRC PMO + EY', 'Write Access': 'EY' },
  'roll out phase 1 > local fit gap > realize & build > wricef developments': { 'Comments': '', 'Read Access': 'IRC PMO + EY', 'Write Access': 'EY' },
  'roll out phase 1 > local fit gap > realize & test > ut': { 'Comments': '', 'Read Access': 'To be Discussed/Decided', 'Write Access': 'To be Discussed/Decided' },
  'roll out phase 1 > local fit gap > realize & test > sit': { 'Comments': '', 'Read Access': 'To be Discussed/Decided', 'Write Access': 'To be Discussed/Decided' },
  'roll out phase 1 > local fit gap > realize & test > uat': { 'Comments': '', 'Read Access': 'To be Discussed/Decided', 'Write Access': 'To be Discussed/Decided' },
  'roll out phase 1 > local fit gap > governance > tr movement tracker': { 'Comments': '', 'Read Access': 'To be Discussed/Decided', 'Write Access': 'To be Discussed/Decided' },
  'roll out phase 1 > local fit gap > governance > sap server readiness': { 'Comments': '', 'Read Access': 'To be Discussed/Decided', 'Write Access': 'To be Discussed/Decided' },
  'roll out phase 1 > local fit gap > master data': { 'Comments': '', 'Read Access': 'To be Discussed/Decided', 'Write Access': 'To be Discussed/Decided' },
  'roll out phase 1 > local fit gap > cut over > cutover plan': { 'Comments': '', 'Read Access': 'To be Discussed/Decided', 'Write Access': 'To be Discussed/Decided' },
  'roll out phase 1 > local fit gap > cut over > cutover strategy': { 'Comments': '', 'Read Access': 'To be Discussed/Decided', 'Write Access': 'To be Discussed/Decided' },
  'roll out phase 1 > local fit gap > cut over > cutover templates': { 'Comments': '', 'Read Access': 'To be Discussed/Decided', 'Write Access': 'To be Discussed/Decided' },
  'roll out phase 1 > local fit gap > pre-go-live': { 'Comments': '', 'Read Access': 'To be Discussed/Decided', 'Write Access': 'To be Discussed/Decided' },
  'roll out phase 1 > local fit gap > go live': { 'Comments': '', 'Read Access': 'To be Discussed/Decided', 'Write Access': 'To be Discussed/Decided' },
  'roll out phase 1 > local fit gap > pgls': { 'Comments': '', 'Read Access': 'To be Discussed/Decided', 'Write Access': 'To be Discussed/Decided' }
};

function attachLiEvent(el) {
    el.addEventListener("click", function(e) {
        e.stopPropagation();
        const path = getFullPath(this);
        const meta = folderMeta[path.toLowerCase()];
        if (meta !== undefined) {
            const parts = path.split(" > ");
            const name = parts[parts.length - 1];
            document.getElementById("infoName").textContent = name;
            document.getElementById("infoPath").textContent = path;
            document.getElementById("infoComments").textContent = meta["Comments"] !== "" ? meta["Comments"] : "None";
            document.getElementById("infoRead").textContent = meta["Read Access"] !== "" ? meta["Read Access"] : "None";
            document.getElementById("infoWrite").textContent = meta["Write Access"] !== "" ? meta["Write Access"] : "None";
            document.getElementById("infoFilename").textContent = meta["Filename Sample"] !== "" ? meta["Filename Sample"] : "None";
            document.getElementById("infoBox").style.display = "block";
        } else {
            document.getElementById("infoBox").style.display = "none";
        }
        showFolderActions(this);
    });
}

document.querySelectorAll("#folderTree li").forEach(el => {
    attachLiEvent(el);
});

function getFullPath(el) {
    let path = [];
    while (el && el.tagName === "LI") {
        let text = '';
        const caret = el.querySelector('.caret');
        if (caret) {
            text = caret.textContent.trim();
        } else {
            // For leaf nodes without a caret, extract only the text content
            // so that action buttons (edit/delete/etc.) are ignored
            el.childNodes.forEach(node => {
                if (node.nodeType === Node.TEXT_NODE) {
                    text += node.textContent;
                }
            });
            text = text.trim();
        }
        text = text.replace(/^📁/, '').trim();
        path.unshift(text);
        el = el.parentElement.closest('li');
    }
    return path.join(' > ');
}

function checkPasscode() {
    const pass = prompt("Enter passcode:");
    return pass === "irc";
}

let currentEditPath = null;

function showFolderActions(li) {
    document.querySelectorAll('.folder-actions').forEach(a => a.remove());
    const span = document.createElement('span');
    span.className = 'folder-actions';
    span.innerHTML =
        '<button onclick="renameFolder(event)">✏️</button>'+
        '<button onclick="addSubfolder(event)">➕</button>'+
        '<button onclick="deleteFolder(event)">🗑️</button>'+
        '<button onclick="editFolderDetails(event)">📝</button>';
    const nested = li.querySelector(':scope > ul');
    if (nested) {
        li.insertBefore(span, nested);
    } else {
        li.appendChild(span);
    }
}

function renameFolder(e) {
    e.stopPropagation();
    if(!checkPasscode()) return;
    const li = e.target.closest('li');
    const oldPath = getFullPath(li);
    const caret = li.querySelector('.caret');
    let textNode = null;
    let oldName = '';
    if(caret) {
        oldName = caret.textContent.trim();
    } else {
        textNode = Array.from(li.childNodes).find(n => n.nodeType === Node.TEXT_NODE);
        if(textNode) oldName = textNode.textContent.replace(/^📁/, '').trim();
    }
    const newName = prompt('Rename folder:', oldName);
    if(!newName) return;
    if(caret) {
        caret.textContent = newName;
    } else if(textNode) {
        textNode.textContent = '📁' + newName;
    }
    const meta = folderMeta[oldPath.toLowerCase()];
    const parts = oldPath.split(' > ');
    parts[parts.length-1] = newName;
    const newPath = parts.join(' > ');
    if(meta) {
        delete folderMeta[oldPath.toLowerCase()];
        folderMeta[newPath.toLowerCase()] = meta;
    }
    if(document.getElementById('infoPath').textContent === oldPath) {
        document.getElementById('infoName').textContent = newName;
        document.getElementById('infoPath').textContent = newPath;
    }
}

function addSubfolder(e) {
    e.stopPropagation();
    if(!checkPasscode()) return;
    const li = e.target.closest('li');
    const name = prompt('New subfolder name:');
    if(!name) return;
    let ul = li.querySelector('.nested');
    if(!ul) {
        ul = document.createElement('ul');
        ul.className = 'nested active';
        li.appendChild(ul);
        if(!li.querySelector('.caret')) {
            let text = '';
            const textNode = Array.from(li.childNodes).find(n => n.nodeType === Node.TEXT_NODE);
            if(textNode) text = textNode.textContent.replace(/^📁/, '').trim();
            const span = document.createElement('span');
            span.className='caret caret-down folder-open';
            span.textContent = text;
            span.addEventListener('click', function(ev){
                ev.stopPropagation();
                const nestedList = this.parentElement.querySelector('.nested');
                if(nestedList){
                    nestedList.classList.toggle('active');
                    this.classList.toggle('caret-down');
                    this.classList.toggle('folder-open');
                    this.classList.toggle('folder-closed');
                }
            });
            li.textContent = '';
            li.appendChild(span);
            li.appendChild(ul);
        }
    } else {
        ul.classList.add('active');
        const caret = li.querySelector('.caret');
        if(caret) { caret.classList.add('caret-down','folder-open'); caret.classList.remove('folder-closed'); }
    }
    const newLi = document.createElement('li');
    newLi.textContent = '📁'+name;
    const parentLevelMatch = Array.from(li.classList).find(c => c.startsWith('level-'));
    let parentLevel = parentLevelMatch ? parseInt(parentLevelMatch.split('-')[1]) : 1;
    const newLevel = Math.min(parentLevel + 1, 6);
    newLi.classList.add('level-' + newLevel);
    ul.appendChild(newLi);
    attachLiEvent(newLi);
    showFolderActions(li);
    const parentPath = getFullPath(li);
    const newPath = parentPath + ' > ' + name;
    folderMeta[newPath.toLowerCase()] = {'Comments':'','Read Access':'','Write Access':''};
}

function deleteFolder(e) {
    e.stopPropagation();
    if(!checkPasscode()) return;
    const li = e.target.closest('li');
    if(!confirm('Delete this folder and its subfolders?')) return;
    const path = getFullPath(li).toLowerCase();
    Object.keys(folderMeta).forEach(k => { if(k.startsWith(path)) delete folderMeta[k]; });
    li.remove();
    document.getElementById('infoBox').style.display = 'none';
}

function editFolderDetails(e) {
    e.stopPropagation();
    if(!checkPasscode()) return;
    const li = e.target.closest('li');
    const path = getFullPath(li);
    currentEditPath = path;
    const meta = folderMeta[path.toLowerCase()] || {'Comments':'','Read Access':'','Write Access':''};
    document.getElementById('editName').value = path.split(' > ').pop();
    document.getElementById('editPath').value = path;
    document.getElementById('editComments').value = meta['Comments'];
    document.getElementById('editRead').value = meta['Read Access'];
    document.getElementById('editWrite').value = meta['Write Access'];
    document.getElementById('editFilename').value = meta['Filename Sample'] || '';
    document.getElementById('infoDisplay').style.display = 'none';
    document.getElementById('editForm').style.display = 'block';
}

function saveFolderDetails() {
    if(!currentEditPath) return;
    const comments = document.getElementById('editComments').value;
    const read = document.getElementById('editRead').value;
    const write = document.getElementById('editWrite').value;
    const filename = document.getElementById('editFilename').value;
    folderMeta[currentEditPath.toLowerCase()] = {
        'Comments': comments,
        'Read Access': read,
        'Write Access': write,
        'Filename Sample': filename
    };
    document.getElementById('infoComments').textContent = comments || 'None';
    document.getElementById('infoRead').textContent = read || 'None';
    document.getElementById('infoWrite').textContent = write || 'None';
    document.getElementById('infoFilename').textContent = filename || 'None';
    document.getElementById('infoDisplay').style.display = 'block';
    document.getElementById('editForm').style.display = 'none';
}

function downloadHTML() {
    const html = document.documentElement.outerHTML;
    const blob = new Blob([html], {type:'text/html'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'updated.html';
    a.click();
    URL.revokeObjectURL(url);
}
</script>
</li></ul></div>
<div id="infoBox">
<h3 style="margin-top:0;">📄 Folder Details</h3>
<div id="infoDisplay">
<p><strong>📁 Name:</strong> <span id="infoName">N/A</span></p>
<p><strong>🗂 Path:</strong> <span id="infoPath">N/A</span></p>
<p><strong>📌 Comments:</strong> <span id="infoComments">N/A</span></p>
<p><strong>👁️ Read Access:</strong> <span id="infoRead">N/A</span></p>
<p><strong>✍️ Write Access:</strong> <span id="infoWrite">N/A</span></p>
<p><strong>📎 Filename Sample:</strong> <span id="infoFilename">N/A</span></p></div>
<form id="editForm" style="display:none;">
<label>Name</label>
<input id="editName" readonly="" type="text"/>
<label>Path</label>
<input id="editPath" readonly="" type="text"/>
<label>Comments</label>
<textarea id="editComments"></textarea>
<label>Read Access</label>
<input id="editRead" type="text"/>
<label>Write Access</label>
<input id="editWrite" type="text"/>
<label>Filename Sample</label>
<input id="editFilename" type="text"/>
<button onclick="saveFolderDetails()" type="button">Save</button>
</form>
</div>
</div>
<button id="downloadBtn" onclick="downloadHTML()">Download the updated HTML</button>
</body>
</html>
